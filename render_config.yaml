# Render Blueprint для развертывания Starlette (FastAPI)
services:
  - type: web
    name: tashboss-api
    env: python
    
    # Команда, которую Render выполнит для установки зависимостей
    buildCommand: "pip install -r requirements.txt"
    
    # КРИТИЧЕСКОЕ ИСПРАВЛЕНИЕ КОМАНДЫ ЗАПУСКА:
    # Обязательное использование uvicorn.workers.UvicornWorker для Starlette/FastAPI
    startCommand: "gunicorn api:app --workers 4 --worker-class uvicorn.workers.UvicornWorker --bind 0.0.0.0:$PORT"
    
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.9
      # Вы должны добавить сюда ваши секретные переменные окружения,
      # такие как BOT_TOKEN и FIREBASE_SERVICE_ACCOUNT_KEY
      # Пример:
      # - key: BOT_TOKEN
      #   value: your_telegram_bot_token
      # - key: FIREBASE_SERVICE_ACCOUNT_KEY
      #   value: |
      #     {"type": "service_account", "project_id": "...", ...}
